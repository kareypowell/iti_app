$.getJSON("/map.json.erb",function(data){'use strict';var myOptions={zoom:data.zoom,center:new google.maps.LatLng(data.mainLatitude,data.mainLongitude),mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:false,styles:data.styles,scrollwheel:false},map=new google.maps.Map(document.getElementById('map'),myOptions);$.each(data.markers,function(i,markerData){var markerImage={url:markerData.image+'.png',scaledSize:new google.maps.Size(data.markerWidth,data.markerHeight),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(data.markerHeight/2,data.markerHeight)},markerOptions={map:map,position:new google.maps.LatLng(markerData.latitude,markerData.longitude),title:markerData.title,animation:google.maps.Animation.DROP,icon:markerImage,optimized:false},marker=new google.maps.Marker(markerOptions),markerTemplate=_.template('<li style="background-image: url(<%= image %>.png)"><h4><%= title %></h4><a href="http://maps.google.com/maps?daddr=<%= latitude %>,<%= longitude %>" target="_blank">Directions<a></li>',markerData);});});